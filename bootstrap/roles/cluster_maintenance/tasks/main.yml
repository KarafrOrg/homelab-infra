---
- name: Validate maintenance operation
  assert:
    that:
      - maintenance_operation is defined
      - maintenance_operation in ['rolling_restart', 'resize_cluster']
    fail_msg: "Invalid maintenance operation. Must be 'rolling_restart' or 'resize_cluster'"

- name: Execute rolling restart
  include_tasks: rolling_restart.yml
  when: maintenance_operation == 'rolling_restart'

- name: Execute cluster resize
  include_tasks: resize_cluster.yml
  when: maintenance_operation == 'resize_cluster'

- name: Display maintenance summary
  debug:
    msg: |
      Maintenance operation '{{ maintenance_operation }}' completed successfully!
      
      Next steps:
      - Verify cluster health: kubectl get nodes
      - Check pod status: kubectl get pods -A
      - Monitor logs: kubectl logs -f <pod-name>

